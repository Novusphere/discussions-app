(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{rZ9W:function(e,t,n){"use strict";n.r(t),n.d(t,"tokenpocketWalletProvider",function(){return p});var o,r,i,c=n("CSbn"),a=function(){return(a=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},u=function(e,t,n,o){return new(n||(n=Promise))(function(r,i){function c(e){try{u(o.next(e))}catch(t){i(t)}}function a(e){try{u(o.throw(e))}catch(t){i(t)}}function u(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(c,a)}u((o=o.apply(e,t||[])).next())})},s=function(e,t){var n,o,r,i,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,o=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(r=(r=c.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(a){i=[6,a],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}};function l(e){"true"===localStorage.getItem("DEBUG")&&console.log("IN WALLET: "+e)}function f(e){return l("The discover() method of myWallet was called"),new Promise(function(e,t){e({keys:[],note:"Wallet does not support discovery"})})}function d(e,t){return r.getArbitrarySignature(o,e,t)}function p(){return function(e){return{id:"TokenPocket",meta:{name:"TokenPocket",shortName:"TP",description:"TokenPocket is multi-chain mobile wallet that is easy and safe to use."},signatureProvider:{getAvailableKeys:function(){return u(this,void 0,void 0,function(){return s(this,function(e){return l("In getAvailableKeys new1"),l("Return Key: "+o),[2,[o]]})})},sign:function(t){return u(this,void 0,void 0,function(){var n,o;return s(this,function(a){switch(a.label){case 0:return l("In Sign method"),i?[3,2]:(l("signatureProvider not yet created. Creating."),r.hasOwnProperty("hookProvider")?(n=new c.JsonRpc(e.protocol+"://"+e.host+":"+e.port),o=new c.Api({rpc:n}),[4,r.hookProvider(e,{},!0,o)]):[3,2]);case 1:i=a.sent(),a.label=2;case 2:return[2,i.sign(t)]}})})}},connect:function(e){return l("In wallet connect"),new Promise(function(e,t){var n=0;!function o(){return l("Checking the state of Scatter Object: "+n+" : "+r),r?e(!0):++n>5?t("Cannot connect to TokenPocket wallet provider"):void setTimeout(function(){o()},1e3)}()})},discover:f,disconnect:function(){return r.disconnect(),Promise.resolve(!0)},login:function(t){return u(this,void 0,void 0,function(){var t,n,i;return s(this,function(c){switch(c.label){case 0:l("In login. Scatter object: "+JSON.stringify(r)),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,r.getIdentity({accounts:[a({},e,{blockchain:"eos"})]})];case 2:return(t=c.sent())?(l("account2:"+(n=t&&t.accounts&&t.accounts.find(function(e){return"eos"===e.blockchain})||void 0)),n?(o=n.publicKey,l("accountName:"+n.name),[2,{accountName:n.name,permission:n.authority,publicKey:o}]):[2,Promise.reject("No account data obtained from Scatter identity")]):[2,Promise.reject("No identity obtained from Scatter")];case 3:return l("error:"+(i=c.sent())),console.log("[Token Pocket]",i),[2,Promise.reject(i)];case 4:return[2]}})})},logout:function(e){return r.forgetIdentity()},signArbitrary:d}}}void 0!==typeof window&&void 0!==typeof document&&(r=window.scatter,document.addEventListener("scatterLoaded",function(){r=window.scatter})),t.default=p}}]);