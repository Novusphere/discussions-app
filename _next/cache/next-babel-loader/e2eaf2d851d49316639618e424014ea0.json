{"ast":null,"code":"const fetch = require('node-fetch');\n\nexport async function getTokens() {\n  const TOKEN_ENDPOINTS = [\"https://raw.githubusercontent.com/eoscafe/eos-airdrops/master/tokens.json\", \"https://raw.githubusercontent.com/Novusphere/eos-forum-settings/master/tokens.json\"];\n  let tokens = [];\n\n  for (let i = 0; i < TOKEN_ENDPOINTS.length; i++) {\n    let request = await fetch(TOKEN_ENDPOINTS[i]);\n    let json = await request.json();\n\n    for (let key in json) {\n      if (key in tokens) {\n        Object.assign(tokens[key], json[key]);\n      } else {\n        tokens[key] = json[key];\n      }\n    }\n  }\n\n  return tokens;\n}\nexport async function getAccountTokens(account, tokens) {\n  let balances = [];\n  let request = await fetch(`https://www.api.bloks.io/account/${account}?type=getAccountTokens`);\n  let json = await request.json();\n\n  for (let i = 0; i < json.tokens.length; i++) {\n    let token = json.tokens[i];\n    let info = tokens.find(t => t.account == token.contract && t.symbol == token.currency);\n    if (info) balances.push({\n      amount: token.amount,\n      token: info\n    });\n  }\n\n  return balances;\n}","map":null,"metadata":{},"sourceType":"module"}