{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _dec13, _dec14, _dec15, _dec16, _dec17, _dec18, _dec19, _dec20, _dec21, _dec22, _dec23, _dec24, _dec25, _dec26, _dec27, _class, _descriptor, _descriptor2, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _descriptor7, _descriptor8, _descriptor9, _descriptor10, _temp;\n\nimport { BaseStore, getOrCreateStore } from 'next-mobx-wrapper';\nimport { action, computed, observable } from 'mobx';\nimport { persist } from 'mobx-persist';\nimport { ModalOptions, SignInMethods } from \"../constants/globals\";\nimport { CreateForm } from \"../components\";\nimport { task } from 'mobx-task';\nimport { discussions, eos, init } from \"../novusphere-js\";\nimport { getUiStore } from \"./index\";\nimport { sleep } from \"../utils\";\nvar NewAuth = (_dec = persist('object'), _dec2 = persist('object'), _dec3 = action.bound, _dec4 = action.bound, _dec5 = action.bound, _dec6 = task.resolved, _dec7 = action.bound, _dec8 = task.resolved, _dec9 = action.bound, _dec10 = task.resolved, _dec11 = action.bound, _dec12 = task.resolved, _dec13 = action.bound, _dec14 = task.resolved, _dec15 = action.bound, _dec16 = task.resolved, _dec17 = action.bound, _dec18 = task.resolved, _dec19 = action.bound, _dec20 = task.resolved, _dec21 = action.bound, _dec22 = action.bound, _dec23 = task.resolved, _dec24 = task.resolved, _dec25 = action.bound, _dec26 = task.resolved, _dec27 = action.bound, (_class = (_temp =\n/*#__PURE__*/\nfunction (_BaseStore) {\n  _inherits(NewAuth, _BaseStore);\n\n  // private stuff\n  // signup object\n  // login objects\n  // status\n  function NewAuth() {\n    var _this;\n\n    _classCallCheck(this, NewAuth);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(NewAuth).call(this));\n\n    _initializerDefineProperty(_this, \"displayName\", _descriptor, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"postPriv\", _descriptor2, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"tipPub\", _descriptor3, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"preferredSignInMethod\", _descriptor4, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"privateKey\", _descriptor5, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"statusJson\", _descriptor6, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"clickedSignInMethod\", _descriptor7, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"signUpObject\", _descriptor8, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"signInObject\", _descriptor9, _assertThisInitialized(_this));\n\n    _initializerDefineProperty(_this, \"hasAccount\", _descriptor10, _assertThisInitialized(_this));\n\n    _this.uiStore = getUiStore();\n\n    _this.checkInitialConditions();\n\n    return _this;\n  }\n\n  _createClass(NewAuth, [{\n    key: \"checkInitialConditions\",\n    value: function () {\n      var _checkInitialConditions = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return sleep(500);\n\n              case 2:\n                if (!(this.getActiveDisplayName && this.postPriv && this.tipPub)) {\n                  _context.next = 17;\n                  break;\n                }\n\n                if (!(this.preferredSignInMethod === SignInMethods.scatter)) {\n                  _context.next = 14;\n                  break;\n                }\n\n                _context.prev = 4;\n                _context.next = 7;\n                return this.initializeScatterLogin();\n\n              case 7:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](4);\n                this.hasAccount = false;\n                return _context.abrupt(\"return\", _context.t0);\n\n              case 14:\n                if (this.preferredSignInMethod === SignInMethods.brainKey) {\n                  if (this.statusJson.bk && this.postPriv && this.tipPub && this.displayName.bk) {\n                    this.hasAccount = true;\n                  }\n                }\n\n                _context.next = 18;\n                break;\n\n              case 17:\n                this.hasAccount = false;\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[4, 10]]);\n      }));\n\n      function checkInitialConditions() {\n        return _checkInitialConditions.apply(this, arguments);\n      }\n\n      return checkInitialConditions;\n    }()\n  }, {\n    key: \"setClickedSignInMethod\",\n    value: function setClickedSignInMethod(method) {\n      this.clickedSignInMethod = method;\n    }\n    /**\r\n     * Used for posting, returns empty string if the\r\n     * user is logged in via a non-scatter method\r\n     */\n\n  }, {\n    key: \"setPreferredSignInMethod\",\n    value: function setPreferredSignInMethod(method) {\n      if (method !== this.preferredSignInMethod) {\n        this.preferredSignInMethod = method;\n      } else {\n        if (method === SignInMethods.brainKey) {\n          this.preferredSignInMethod = SignInMethods.scatter;\n        }\n\n        if (method === SignInMethods.scatter) {\n          this.preferredSignInMethod = SignInMethods.brainKey;\n        }\n      }\n    }\n    /**\r\n     * Signup forms\r\n     */\n\n  }, {\n    key: \"generateBrianKey\",\n    value: function () {\n      var _generateBrianKey = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var key;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                key = discussions.bkCreate();\n                console.log('Class: NewAuth, Function: generateBrianKey, Line 81 key: ', key);\n                this.signUpObject.brianKey = key;\n                return _context2.abrupt(\"return\", key);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function generateBrianKey() {\n        return _generateBrianKey.apply(this, arguments);\n      }\n\n      return generateBrianKey;\n    }()\n  }, {\n    key: \"logOut\",\n    value: function () {\n      var _logOut = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                _context3.next = 3;\n                return eos.logout();\n\n              case 3:\n                this.hasAccount = false;\n                this.uiStore.showToast('You have signed out!', 'success');\n                _context3.next = 10;\n                break;\n\n              case 7:\n                _context3.prev = 7;\n                _context3.t0 = _context3[\"catch\"](0);\n                throw _context3.t0;\n\n              case 10:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 7]]);\n      }));\n\n      function logOut() {\n        return _logOut.apply(this, arguments);\n      }\n\n      return logOut;\n    }()\n  }, {\n    key: \"signUpWithBK\",\n    value: function () {\n      var _signUpWithBK = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee4() {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n\n                if (!(this.signUpObject.brianKey === this.signUpObject.brianKeyVerify)) {\n                  _context4.next = 8;\n                  break;\n                }\n\n                _context4.next = 4;\n                return this.completeSignUpProcess();\n\n              case 4:\n                this.uiStore.hideModal();\n                this.uiStore.showToast('You have successfully signed up!', 'success');\n                _context4.next = 9;\n                break;\n\n              case 8:\n                this.uiStore.showToast('The key you entered does not match the one we generated. Please try again.', 'error');\n\n              case 9:\n                _context4.next = 16;\n                break;\n\n              case 11:\n                _context4.prev = 11;\n                _context4.t0 = _context4[\"catch\"](0);\n                this.uiStore.showToast(_context4.t0.message, 'error');\n                console.error(_context4.t0);\n                return _context4.abrupt(\"return\", _context4.t0);\n\n              case 16:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 11]]);\n      }));\n\n      function signUpWithBK() {\n        return _signUpWithBK.apply(this, arguments);\n      }\n\n      return signUpWithBK;\n    }()\n    /**\r\n     * Sign in forms\r\n     */\n\n  }, {\n    key: \"loginWithBK\",\n    value: function () {\n      var _loginWithBK = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee5(bk, displayName, password) {\n        var bkIsValid, unparsedJSON, statusJSON;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                // check if valid bk\n                bkIsValid = discussions.bkIsValid(bk);\n\n                if (bkIsValid) {\n                  _context5.next = 5;\n                  break;\n                }\n\n                this.uiStore.showToast('You have entered an invalid brain key.', 'error');\n                return _context5.abrupt(\"return\");\n\n              case 5:\n                _context5.next = 7;\n                return this.bkToStatusJson(bk, displayName, password, null);\n\n              case 7:\n                unparsedJSON = _context5.sent;\n                console.log('Class: NewAuth, Function: loginWithBK, Line 363 unparsedJSON: ', unparsedJSON);\n\n                if (!unparsedJSON) {\n                  _context5.next = 18;\n                  break;\n                }\n\n                statusJSON = JSON.parse(unparsedJSON);\n                this.statusJson.bk = statusJSON;\n                this.displayName.bk = statusJSON['displayName'];\n                _context5.next = 15;\n                return this.storeKeys(bk);\n\n              case 15:\n                this.completeSignInProcess();\n                _context5.next = 19;\n                break;\n\n              case 18:\n                console.log('failed');\n\n              case 19:\n                _context5.next = 25;\n                break;\n\n              case 21:\n                _context5.prev = 21;\n                _context5.t0 = _context5[\"catch\"](0);\n                this.uiStore.showToast('Something went wrong!', 'error');\n                return _context5.abrupt(\"return\", _context5.t0);\n\n              case 25:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 21]]);\n      }));\n\n      function loginWithBK(_x, _x2, _x3) {\n        return _loginWithBK.apply(this, arguments);\n      }\n\n      return loginWithBK;\n    }()\n  }, {\n    key: \"loginWithPassword\",\n    value: function () {\n      var _loginWithPassword = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee6(password) {\n        var bk;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.prev = 0;\n                _context6.next = 3;\n                return discussions.bkFromStatusJson(JSON.stringify(this.statusJson.bk), password);\n\n              case 3:\n                bk = _context6.sent;\n                _context6.next = 6;\n                return this.loginWithBK(bk, this.statusJson.bk['displayName'], password);\n\n              case 6:\n                _context6.next = 12;\n                break;\n\n              case 8:\n                _context6.prev = 8;\n                _context6.t0 = _context6[\"catch\"](0);\n                this.uiStore.showToast(_context6.t0.message, 'error');\n                return _context6.abrupt(\"return\", _context6.t0);\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[0, 8]]);\n      }));\n\n      function loginWithPassword(_x4) {\n        return _loginWithPassword.apply(this, arguments);\n      }\n\n      return loginWithPassword;\n    }()\n  }, {\n    key: \"initializeScatterLogin\",\n    value: function () {\n      var _initializeScatterLogin = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee7() {\n        var wallet;\n        return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return init();\n\n              case 3:\n                _context7.next = 5;\n                return eos.detectWallet();\n\n              case 5:\n                wallet = _context7.sent;\n\n                if (!(typeof wallet !== 'boolean' && wallet)) {\n                  _context7.next = 18;\n                  break;\n                }\n\n                _context7.next = 9;\n                return eos.login();\n\n              case 9:\n                console.log('time to ask for your password');\n\n                if (!(this.uiStore.activeModal !== ModalOptions.signIn)) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                this.uiStore.showModal(ModalOptions.signIn);\n                _context7.next = 14;\n                return sleep(50);\n\n              case 14:\n                this.signInObject.ref.goToStep(5);\n\n              case 15:\n                if (this.uiStore.activeModal === ModalOptions.signIn) {\n                  this.signInObject.ref.goToStep(5);\n                }\n\n                _context7.next = 19;\n                break;\n\n              case 18:\n                throw new Error('Failed to detect wallet');\n\n              case 19:\n                _context7.next = 26;\n                break;\n\n              case 21:\n                _context7.prev = 21;\n                _context7.t0 = _context7[\"catch\"](0);\n                this.uiStore.showToast('Failed to detect wallet', 'error');\n                console.log(_context7.t0);\n                return _context7.abrupt(\"return\", _context7.t0);\n\n              case 26:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 21]]);\n      }));\n\n      function initializeScatterLogin() {\n        return _initializeScatterLogin.apply(this, arguments);\n      }\n\n      return initializeScatterLogin;\n    }()\n  }, {\n    key: \"loginWithScatter\",\n    value: function () {\n      var _loginWithScatter = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee8(password) {\n        var accountName, json, bk;\n        return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                _context8.prev = 0;\n                accountName = eos.accountName;\n                _context8.next = 4;\n                return discussions.bkRetrieveStatusEOS(accountName);\n\n              case 4:\n                json = _context8.sent;\n                _context8.next = 7;\n                return discussions.bkFromStatusJson(json, password);\n\n              case 7:\n                bk = _context8.sent;\n                _context8.next = 10;\n                return this.storeKeys(bk);\n\n              case 10:\n                if (bk) {\n                  _context8.next = 12;\n                  break;\n                }\n\n                return _context8.abrupt(\"return\");\n\n              case 12:\n                this.statusJson.scatter = JSON.parse(json);\n                this.displayName.scatter = accountName;\n\n                if (!accountName) {\n                  _context8.next = 18;\n                  break;\n                }\n\n                this.completeSignInProcess();\n                _context8.next = 19;\n                break;\n\n              case 18:\n                throw new Error('Failed to get account name');\n\n              case 19:\n                _context8.next = 25;\n                break;\n\n              case 21:\n                _context8.prev = 21;\n                _context8.t0 = _context8[\"catch\"](0);\n                this.uiStore.showToast(_context8.t0.message, 'error');\n                return _context8.abrupt(\"return\", _context8.t0);\n\n              case 25:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this, [[0, 21]]);\n      }));\n\n      function loginWithScatter(_x5) {\n        return _loginWithScatter.apply(this, arguments);\n      }\n\n      return loginWithScatter;\n    }()\n  }, {\n    key: \"handleStepSwitchForBK\",\n    value: function () {\n      var _handleStepSwitchForBK = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee9() {\n        return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (this.hasBKAccount) {\n                  // push them to password\n                  this.signInObject.ref.goToStep(3);\n                  console.log('handleStepSwitchForBK clicked, has bk account');\n                } else {\n                  // let them setup a new bk\n                  this.signInObject.ref.goToStep(2);\n                  console.log('handleStepSwitchForBK clicked, does not have BK account');\n                }\n\n              case 1:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function handleStepSwitchForBK() {\n        return _handleStepSwitchForBK.apply(this, arguments);\n      }\n\n      return handleStepSwitchForBK;\n    }()\n  }, {\n    key: \"completeSignInProcess\",\n    value: function completeSignInProcess() {\n      this.uiStore.showToast('You have successfully signed in!', 'success');\n      this.hasAccount = true;\n\n      if (this.signInObject.ref) {\n        this.signInObject.ref.goToStep(1);\n      }\n\n      if (this.uiStore.activeModal) {\n        this.uiStore.hideModal();\n      }\n    }\n  }, {\n    key: \"completeSignUpProcess\",\n    value: function () {\n      var _completeSignUpProcess = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee10() {\n        var json, transact;\n        return _regeneratorRuntime.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                _context10.prev = 0;\n                console.log('signing up with BK started');\n                _context10.next = 4;\n                return this.bkToStatusJson(this.signUpObject.brianKeyVerify, this.signUpObject.username, this.signUpObject.password, null);\n\n              case 4:\n                json = _context10.sent;\n                this.statusJson.bk = JSON.parse(json);\n                this.displayName.bk = this.signUpObject.username;\n                _context10.next = 9;\n                return discussions.bkUpdateStatusEOS(json);\n\n              case 9:\n                transact = _context10.sent;\n                _context10.next = 12;\n                return this.storeKeys(this.signUpObject.brianKeyVerify);\n\n              case 12:\n                console.log('signing up with BK ended');\n                return _context10.abrupt(\"return\", transact);\n\n              case 16:\n                _context10.prev = 16;\n                _context10.t0 = _context10[\"catch\"](0);\n\n              case 18:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this, [[0, 16]]);\n      }));\n\n      function completeSignUpProcess() {\n        return _completeSignUpProcess.apply(this, arguments);\n      }\n\n      return completeSignUpProcess;\n    }()\n  }, {\n    key: \"storeKeys\",\n    value: function () {\n      var _storeKeys = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee11(bk) {\n        var keys;\n        return _regeneratorRuntime.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                _context11.prev = 0;\n                _context11.next = 3;\n                return discussions.bkToKeys(bk);\n\n              case 3:\n                keys = _context11.sent;\n                this.postPriv = keys.post.priv;\n                this.tipPub = keys.tip.pub;\n                return _context11.abrupt(\"return\", keys);\n\n              case 9:\n                _context11.prev = 9;\n                _context11.t0 = _context11[\"catch\"](0);\n                console.log(_context11.t0);\n                throw _context11.t0;\n\n              case 13:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this, [[0, 9]]);\n      }));\n\n      function storeKeys(_x6) {\n        return _storeKeys.apply(this, arguments);\n      }\n\n      return storeKeys;\n    }()\n  }, {\n    key: \"bkToStatusJson\",\n    value: function () {\n      var _bkToStatusJson = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee12(bk, username, password, status) {\n        return _regeneratorRuntime.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                _context12.prev = 0;\n                _context12.next = 3;\n                return discussions.bkToStatusJson(bk, username, password, status);\n\n              case 3:\n                return _context12.abrupt(\"return\", _context12.sent);\n\n              case 6:\n                _context12.prev = 6;\n                _context12.t0 = _context12[\"catch\"](0);\n                return _context12.abrupt(\"return\", _context12.t0);\n\n              case 9:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, null, [[0, 6]]);\n      }));\n\n      function bkToStatusJson(_x7, _x8, _x9, _x10) {\n        return _bkToStatusJson.apply(this, arguments);\n      }\n\n      return bkToStatusJson;\n    }()\n  }, {\n    key: \"isBKAccount\",\n    get: function get() {\n      return this.getActiveDisplayName === this.displayName.bk;\n    }\n  }, {\n    key: \"activePublicKey\",\n    get: function get() {\n      if (!this.statusJson.bk || !this.statusJson.scatter) return null;\n\n      if (this.isBKAccount) {\n        return this.statusJson.bk.post;\n      }\n\n      return this.statusJson.scatter.post;\n    }\n  }, {\n    key: \"posterName\",\n    get: function get() {\n      return this.getActiveDisplayName;\n    }\n  }, {\n    key: \"getActiveDisplayName\",\n    get: function get() {\n      if (this.clickedSignInMethod === SignInMethods.brainKey) {\n        return this.displayName.bk;\n      }\n\n      if (this.clickedSignInMethod === SignInMethods.scatter) {\n        return this.displayName.scatter;\n      }\n\n      if (!this.clickedSignInMethod) {\n        if (this.preferredSignInMethod === SignInMethods.brainKey) {\n          return this.displayName.bk;\n        }\n\n        return this.displayName.scatter;\n      }\n    }\n  }, {\n    key: \"hasBKAccount\",\n    get: function get() {\n      if (!this.displayName.bk) return false;\n      return this.displayName.bk;\n    }\n  }, {\n    key: \"signUpForm\",\n    get: function get() {\n      var _this2 = this;\n\n      return new CreateForm({\n        onSubmit: function onSubmit(form) {\n          var _form$values = form.values(),\n              displayName = _form$values.displayName,\n              password = _form$values.password;\n\n          if (!form.hasError) {\n            _this2.signUpObject.username = displayName;\n            _this2.signUpObject.password = password;\n          }\n        }\n      }, [{\n        name: 'displayName',\n        label: 'Display Name',\n        type: 'text',\n        value: this.signUpObject.username,\n        placeholder: 'Your display name',\n        rules: 'required|string|between:3,25'\n      }, {\n        name: 'password',\n        label: 'Password',\n        type: 'password',\n        value: this.signUpObject.password,\n        placeholder: 'Your password',\n        rules: 'required|string|between:5,25'\n      }, {\n        name: 'passwordConfirm',\n        label: 'Password Confirmation',\n        type: 'password',\n        value: this.signUpObject.password,\n        placeholder: 'Confirm Password',\n        rules: 'required|string|same:password'\n      }]);\n    }\n  }, {\n    key: \"verifyBKForm\",\n    get: function get() {\n      var _this3 = this;\n\n      return new CreateForm({\n        onSubmit: function onSubmit(form) {\n          var _form$values2 = form.values(),\n              bkVerify = _form$values2.bkVerify;\n\n          if (!form.hasError) {\n            _this3.signUpObject.brianKeyVerify = bkVerify;\n\n            _this3.signUpWithBK();\n          }\n        }\n      }, [{\n        name: 'bkVerify',\n        label: 'Verify your brain key',\n        type: 'textarea',\n        rules: 'required|string'\n      }]);\n    }\n  }, {\n    key: \"setNewBKAndPasswordForm\",\n    get: function get() {\n      var _this4 = this;\n\n      return new CreateForm({\n        onSubmit: function onSubmit(form) {\n          var _form$values3 = form.values(),\n              bk = _form$values3.bk,\n              displayName = _form$values3.displayName,\n              password = _form$values3.password;\n\n          if (!form.hasError) {\n            _this4.loginWithBK(bk, displayName, password);\n          }\n        }\n      }, [{\n        name: 'bk',\n        label: 'Brain Key',\n        type: 'textarea',\n        placeholder: 'Enter your BK',\n        rules: 'required|string'\n      }, {\n        name: 'displayName',\n        label: 'Display Name',\n        type: 'text',\n        placeholder: 'Enter your preferred display name',\n        rules: 'required|string'\n      }, {\n        name: 'password',\n        label: 'Password',\n        type: 'password',\n        placeholder: 'Your password',\n        rules: 'required|string|between:5,25'\n      }]);\n    }\n  }, {\n    key: \"setPasswordBK\",\n    get: function get() {\n      var _this5 = this;\n\n      return new CreateForm({\n        onSubmit: function onSubmit(form) {\n          var _form$values4 = form.values(),\n              password = _form$values4.password;\n\n          if (!form.hasError) {\n            _this5.loginWithPassword(password);\n          }\n        }\n      }, [{\n        name: 'password',\n        label: 'Password',\n        type: 'password',\n        placeholder: 'Your password',\n        rules: 'required|string|between:5,25'\n      }]);\n    }\n  }, {\n    key: \"setPasswordScatter\",\n    get: function get() {\n      var _this6 = this;\n\n      return new CreateForm({\n        onSubmit: function onSubmit(form) {\n          var _form$values5 = form.values(),\n              password = _form$values5.password;\n\n          if (!form.hasError) {\n            return _this6.loginWithScatter(password);\n          }\n        }\n      }, [{\n        name: 'password',\n        label: 'Password',\n        type: 'password',\n        placeholder: 'Your password',\n        rules: 'required|string|between:5,25'\n      }]);\n    }\n  }, {\n    key: \"choosePassword\",\n    get: function get() {\n      return new CreateForm({\n        onSubmit: function () {\n          var _onSubmit = _asyncToGenerator(\n          /*#__PURE__*/\n          _regeneratorRuntime.mark(function _callee13(form) {\n            var _form$values6, password;\n\n            return _regeneratorRuntime.wrap(function _callee13$(_context13) {\n              while (1) {\n                switch (_context13.prev = _context13.next) {\n                  case 0:\n                    _form$values6 = form.values(), password = _form$values6.password;\n                    console.log('Class: NewAuth, Function: onSubmit, Line 264 password: ', password);\n\n                  case 2:\n                  case \"end\":\n                    return _context13.stop();\n                }\n              }\n            }, _callee13);\n          }));\n\n          function onSubmit(_x11) {\n            return _onSubmit.apply(this, arguments);\n          }\n\n          return onSubmit;\n        }()\n      }, [{\n        name: 'password',\n        label: 'Password',\n        type: 'password',\n        placeholder: 'Your password',\n        rules: 'required|string|between:5,25'\n      }, {\n        name: 'passwordConfirm',\n        label: 'Password Confirmation',\n        type: 'password',\n        placeholder: 'Confirm Password',\n        rules: 'required|string|same:password'\n      }]);\n    }\n  }]);\n\n  return NewAuth;\n}(BaseStore), _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"displayName\", [_dec, observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      bk: '',\n      scatter: ''\n    };\n  }\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"postPriv\", [persist, observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor3 = _applyDecoratedDescriptor(_class.prototype, \"tipPub\", [persist, observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor4 = _applyDecoratedDescriptor(_class.prototype, \"preferredSignInMethod\", [persist, observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return SignInMethods.brainKey;\n  }\n}), _descriptor5 = _applyDecoratedDescriptor(_class.prototype, \"privateKey\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor6 = _applyDecoratedDescriptor(_class.prototype, \"statusJson\", [_dec2, observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      bk: null,\n      scatter: null\n    };\n  }\n}), _descriptor7 = _applyDecoratedDescriptor(_class.prototype, \"clickedSignInMethod\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return '';\n  }\n}), _descriptor8 = _applyDecoratedDescriptor(_class.prototype, \"signUpObject\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      brianKey: '',\n      username: '',\n      password: '',\n      brianKeyVerify: ''\n    };\n  }\n}), _descriptor9 = _applyDecoratedDescriptor(_class.prototype, \"signInObject\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return {\n      ref: null,\n      step: 1\n    };\n  }\n}), _descriptor10 = _applyDecoratedDescriptor(_class.prototype, \"hasAccount\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: function initializer() {\n    return false;\n  }\n}), _applyDecoratedDescriptor(_class.prototype, \"checkInitialConditions\", [task, _dec3], Object.getOwnPropertyDescriptor(_class.prototype, \"checkInitialConditions\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"isBKAccount\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"isBKAccount\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"activePublicKey\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"activePublicKey\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setClickedSignInMethod\", [_dec4], Object.getOwnPropertyDescriptor(_class.prototype, \"setClickedSignInMethod\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"posterName\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"posterName\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"getActiveDisplayName\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"getActiveDisplayName\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"hasBKAccount\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"hasBKAccount\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setPreferredSignInMethod\", [_dec5], Object.getOwnPropertyDescriptor(_class.prototype, \"setPreferredSignInMethod\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"generateBrianKey\", [_dec6, _dec7], Object.getOwnPropertyDescriptor(_class.prototype, \"generateBrianKey\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"logOut\", [_dec8, _dec9], Object.getOwnPropertyDescriptor(_class.prototype, \"logOut\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"signUpWithBK\", [_dec10, _dec11], Object.getOwnPropertyDescriptor(_class.prototype, \"signUpWithBK\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"setPasswordBK\", [computed], Object.getOwnPropertyDescriptor(_class.prototype, \"setPasswordBK\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"loginWithBK\", [_dec12, _dec13], Object.getOwnPropertyDescriptor(_class.prototype, \"loginWithBK\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"loginWithPassword\", [_dec14, _dec15], Object.getOwnPropertyDescriptor(_class.prototype, \"loginWithPassword\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"initializeScatterLogin\", [_dec16, _dec17], Object.getOwnPropertyDescriptor(_class.prototype, \"initializeScatterLogin\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"loginWithScatter\", [_dec18, _dec19], Object.getOwnPropertyDescriptor(_class.prototype, \"loginWithScatter\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"handleStepSwitchForBK\", [_dec20, _dec21], Object.getOwnPropertyDescriptor(_class.prototype, \"handleStepSwitchForBK\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"completeSignInProcess\", [_dec22], Object.getOwnPropertyDescriptor(_class.prototype, \"completeSignInProcess\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"completeSignUpProcess\", [_dec23], Object.getOwnPropertyDescriptor(_class.prototype, \"completeSignUpProcess\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"storeKeys\", [_dec24, _dec25], Object.getOwnPropertyDescriptor(_class.prototype, \"storeKeys\"), _class.prototype), _applyDecoratedDescriptor(_class.prototype, \"bkToStatusJson\", [_dec26, _dec27], Object.getOwnPropertyDescriptor(_class.prototype, \"bkToStatusJson\"), _class.prototype)), _class));\nexport { NewAuth as default };\nexport var getNewAuthStore = getOrCreateStore('newAuthStore', NewAuth);","map":null,"metadata":{},"sourceType":"module"}